# 构造数据抽象

复合数据、抽象屏障、模糊“过程”和“数据”的划分、符号表达式（扩大语言的表述能力）、通用型操作

## 数据抽象导引

### 抽象屏障

```scheme
(define (make_vector x y) (cons x y)) ; (define make_vector cons)
(define (getx x) (car x)) ; (define getx car)
(define (gety x) (cdr x)) ; (define gety cdr)
```

```scheme
(define make_line cons)

(define start car)
(define (startx line)
  (getx (start line)))
(define (starty line)
  (gety (start line)))

(define end cdr)
(define (endx line)
  (getx (end line)))
(define (endy line)
  (gety (end line)))

(define (length line)
  (sqrt (add (sub endx startx) (sub endy starty))))
```

```bash
-----( 图形程序 )-----
图形、对图形的操作
-----( 线 )------
make_line end start endx startx...
-----( 向量 )------
make_vector getx gety...
-----( 有序对 )-----
cons car cdr...
```

### 数据意味着什么

有序对的创建：

```scheme
(define (cons x y)
  (lambda (pick)
    (cond ((= pick 0) x)
          ((= pick 1) y)
          (else (error "Argument not 0 or 1 -- cons" pick)))))

(define (car pair) (pair 0))
(define (cdr pair) (pair 1))
```

cons 返回一个过程，car cdr 对过程进行了操作，有序对的数据结构其实是一种过程，模糊“过程”和“数据”的划分
